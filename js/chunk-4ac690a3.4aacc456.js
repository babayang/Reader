(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ac690a3"],{"047b":function(t,e,s){},"0b58":function(t,e,s){"use strict";s("1e34")},"0cae":function(t,e,s){},1217:function(t,e,s){},"180d":function(t,e,s){},"18e6":function(t,e,s){},"1e34":function(t,e,s){},"25f0":function(t,e,s){"use strict";var i=s("6eeb"),o=s("825a"),n=s("d039"),a=s("ad6d"),r="toString",c=RegExp.prototype,l=c[r],u=n((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=r;(u||d)&&i(RegExp.prototype,r,(function(){var t=o(this),e=String(t.source),s=t.flags,i=String(void 0===s&&t instanceof RegExp&&!("flags"in c)?a.call(t):s);return"/"+e+"/"+i}),{unsafe:!0})},"262b":function(t,e,s){"use strict";s("18e6")},2836:function(t,e,s){"use strict";s("c9f7")},"31be":function(t,e,s){"use strict";s("180d")},3892:function(t,e,s){},"408a":function(t,e,s){},"482f":function(t,e,s){"use strict";s("408a")},"51a1":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"ebook",staticClass:"Ebook"},[s("EbookTitle"),s("router-view"),s("EbookMenu"),s("EbookBookmark"),s("EbookHeader"),s("EbookFooter")],1)},o=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-down"}},[t.menuVisible?s("div",{staticClass:"title-wrapper"},[s("div",{staticClass:"left",on:{click:t.back}},[s("span",{staticClass:"icon-back"})]),s("div",{staticClass:"right"},[s("div",{staticClass:"icon-wrapper",on:{click:t.shelf}},[s("span",{staticClass:"icon-shelf"})]),s("div",{staticClass:"icon-wrapper",on:{click:t.cart}},[s("span",{staticClass:"icon-cart"})]),s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-more"})])])]):t._e()])},a=[],r=s("ac0d"),c={mixins:[r["a"]],data:function(){return{}},computed:{},methods:{back:function(){this.$router.go(-1)},shelf:function(){this.$router.push({path:"/store/shelf"})},cart:function(){this.$router.push({path:"/store/home"})}}},l=c,u=(s("262b"),s("2877")),d=Object(u["a"])(l,n,a,!1,null,"e6775df8",null),h=d.exports,f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("transition",{attrs:{name:"slide-up"}},[t.menuVisible?s("div",{staticClass:"menu-wrapper",class:{"hide-box-shadow":!t.menuVisible||t.settingVisible>=0}},[s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-menu",on:{click:function(e){return t.showSetting(3)}}})]),s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-progress",on:{click:function(e){return t.showSetting(2)}}})]),s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-bright",on:{click:function(e){return t.showSetting(1)}}})]),s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-A",on:{click:function(e){return t.showSetting(0)}}})])]):t._e()]),s("EbookSettingFont"),s("EbookSettingFontPopup"),s("EbookSettingTheme"),s("EbookSettingProgress"),s("EbookSlide")],1)},p=[],m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"popup-slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.fontFamilyVisible,expression:"fontFamilyVisible"}],staticClass:"ebook-popup-list"},[s("div",{staticClass:"popup-title-wrapper"},[s("div",{staticClass:"popup-icon-wrapper",on:{click:t.hiddenFontFimaly}},[s("span",{staticClass:"icon-down2"})]),s("span",{staticClass:"popup-title"},[t._v(t._s(t.$t("book.selectFont")))])]),s("div",{staticClass:"ebook-popup-list-wrapper"},t._l(t.fontFamilyList,(function(e,i){return s("div",{key:i,staticClass:"ebook-popup-item",on:{click:function(s){return t.setFontFamily(e.font)}}},[s("div",{staticClass:"ebook-popup-item-text",class:{selected:t.isSelected(e)}},[t._v(" "+t._s(e.font)+" ")]),s("div",{staticClass:"ebook-popup-item-check",class:{selected:t.isSelected(e)}},[s("span",{staticClass:"icon-check"})])])})),0)])])},b=[],k=s("5de6"),v=s("e8ec"),g={mixins:[r["a"]],mounted:function(){},methods:{isSelected:function(t){return t.font===this.defaultFontFamily},setFontFamily:function(t){this.setDefaultFontFamily(t),"Default"===t?(this.currentBook.rendition.themes.font("Times New Roman"),Object(v["n"])(this.fileName,"Times New Roman")):(this.currentBook.rendition.themes.font(t),Object(v["n"])(this.fileName,t))},hiddenFontFimaly:function(){this.setFontFamilyVisible(!1)}},data:function(){return{fontFamilyList:k["a"]}}},C=g,w=(s("93a2"),Object(u["a"])(C,m,b,!1,null,"2b26f7af",null)),x=w.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&0===t.settingVisible,expression:"menuVisible && settingVisible === 0"}],staticClass:"setting-wrapper"},[s("div",{staticClass:"setting-font-size"},[s("div",{staticClass:"preview",style:{fontSize:t.fontSizeList[0].fontSize+"px"}},[t._v(" A ")]),s("div",{staticClass:"select"},t._l(t.fontSizeList,(function(e,i){return s("div",{key:i,staticClass:"select-wrapper",on:{click:function(s){return t.setFontSize(e.fontSize)}}},[s("div",{staticClass:"line"}),s("div",{staticClass:"point-wrapper"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.defaultFontSize===e.fontSize,expression:"defaultFontSize === item.fontSize"}],staticClass:"point"},[s("div",{staticClass:"small-point"})])]),s("div",{staticClass:"line"})])})),0),s("div",{staticClass:"preview",style:{fontSize:t.fontSizeList[t.fontSizeList.length-1].fontSize+"px"}},[t._v(" A ")])]),s("div",{staticClass:"setting-font-family",on:{click:t.showFontFamilyPopup}},[s("div",{staticClass:"setting-font-family-text-wapper"},[s("span",{staticClass:"setting-font-family-text"},[t._v(t._s(t.defaultFontFamily))])]),s("div",{staticClass:"setting-font-family-icon-wrapper"},[s("span",{staticClass:"icon-forward"})])])])])},_=[],S={mixins:[r["a"]],methods:{setFontSize:function(t){this.setDefaultFontSize(t),this.currentBook.rendition.themes.fontSize(t+"px"),Object(v["o"])(this.fileName,t)},showFontFamilyPopup:function(){this.setFontFamilyVisible(!0)}},data:function(){return{fontSizeList:k["b"]}}},$=S,T=(s("c21d"),Object(u["a"])($,y,_,!1,null,"af84a31e",null)),F=T.exports,E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&1===t.settingVisible,expression:"menuVisible && settingVisible === 1"}],staticClass:"setting-wrapper"},[s("div",{staticClass:"setting-theme"},t._l(t.themeList,(function(e,i){return s("div",{key:i,staticClass:"setting-theme-item",on:{click:function(e){return t.setTheme(i)}}},[s("div",{staticClass:"preview",class:{selected:e.name===t.defaultTheme},style:{background:e.style.body.background}}),s("div",{staticClass:"text",class:{selected:e.name===t.defaultTheme}},[t._v(" "+t._s(e.alias)+" ")])])})),0)])])},O=[],V=(s("b0c0"),{mixins:[r["a"]],data:function(){return{}},computed:{},methods:{setTheme:function(t){var e=this;this.setDefaultTheme(this.themeList[t].name).then((function(){e.currentBook.rendition.themes.select(e.defaultTheme),Object(v["t"])(e.fileName,e.defaultTheme),e.initGlobalCss()}))}}}),j=V,B=(s("b75d"),Object(u["a"])(j,E,O,!1,null,"5711a9dc",null)),N=B.exports,P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&2===t.settingVisible,expression:"menuVisible && settingVisible === 2"}],staticClass:"setting-wrapper"},[s("div",{staticClass:"setting-progress"},[s("div",{staticClass:"read-time-wrapper"},[s("span",{staticClass:"read-time-text"},[t._v(t._s(t.getReadTimeText()))]),s("span",{staticClass:"icon-forward"})]),s("div",{staticClass:"progress-wrapper"},[s("div",{staticClass:"progress-icon-wrapper",on:{click:function(e){return t.prevSection()}}},[s("span",{staticClass:"icon-back"})]),s("input",{ref:"progress",staticClass:"progress",attrs:{type:"range",max:"100",min:"0",step:"1",disabled:!t.bookAvailable},domProps:{value:t.progress},on:{change:function(e){return t.onProgressChange(e.target.value)},input:function(e){return t.onProgressInput(e.target.value)}}}),s("div",{staticClass:"progress-icon-wrapper",on:{click:function(e){return t.nextSection()}}},[s("span",{staticClass:"icon-forward"})])]),s("div",{staticClass:"text-wrapper"},[s("span",{staticClass:"progress-section-text"},[t._v(t._s(t.getSectionName))]),s("span",[t._v("("+t._s(t.bookAvailable?t.progress+"%":t.$t("book.loading"))+")")])])])])])},L=[],z={mixins:[r["a"]],data:function(){return{}},computed:{},methods:{onProgressInput:function(t){var e=this;this.setProgress(t).then((function(){e.updateProgressBg()}))},onProgressChange:function(t){var e=this;this.setProgress(t).then((function(){e.displayProcess(),e.updateProgressBg()}))},prevSection:function(){var t=this;this.section>0&&this.bookAvailable&&this.setSection(this.section-1).then((function(){t.displaySection()}))},nextSection:function(){var t=this;this.section<this.currentBook.spine.length-1&&this.bookAvailable&&this.setSection(this.section+1).then((function(){t.displaySection()}))},displayProcess:function(){var t=this.currentBook.locations.cfiFromPercentage(this.progress/100);this.display(t)},displaySection:function(){var t=this.currentBook.section(this.section);t&&t.href&&this.display(t.href)},updateProgressBg:function(){this.$refs.progress.style.backgroundSize="".concat(this.progress,"% 100%")}},beforeUpdate:function(){this.updateProgressBg()}},A=z,M=(s("8d62"),Object(u["a"])(A,P,L,!1,null,"4d98b59a",null)),W=M.exports,I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&3===t.settingVisible,expression:"menuVisible && settingVisible === 3"}],staticClass:"slide-content-wrapper"},[s("transition",{attrs:{name:"slide-right"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:3===t.settingVisible,expression:"settingVisible === 3"}],staticClass:"content"},[t.bookAvailable?s("div",{staticClass:"content-page-wrapper"},[s("div",{staticClass:"content-page"},[s(1===t.currentTab?t.content:t.bookmark,{tag:"component"})],1),s("div",{staticClass:"content-page-tab"},[s("div",{staticClass:"content-page-tab-item",class:{selected:1===t.currentTab},on:{click:function(e){return t.selectTab(1)}}},[t._v(" "+t._s(t.$t("book.navigation"))+" ")]),s("div",{staticClass:"content-page-tab-item",class:{selected:2===t.currentTab},on:{click:function(e){return t.selectTab(2)}}},[t._v(" "+t._s(t.$t("book.bookmark"))+" ")])])]):s("div",{staticClass:"content-empty"},[s("EbookLoading")],1)])]),s("div",{staticClass:"content-bg",on:{click:function(e){return t.hideTitleAndMenu()}}})],1)])},D=[],R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-loading"},[s("div",{staticClass:"ebook-loading-wrapper"},[t._l(t.data,(function(e,i){return s("div",{key:i,staticClass:"ebook-loading-item"},t._l(e,(function(t,e){return s("div",{key:e,staticClass:"ebook-loading-line-wrapper"},[s("div",{ref:"line",refInFor:!0,staticClass:"ebook-loading-line"}),s("div",{ref:"mask",refInFor:!0,staticClass:"ebook-loading-mask"})])})),0)})),s("div",{staticClass:"ebook-loading-center"})],2)])},H=[],K=(s("159b"),s("fa7d")),Y={data:function(){return{data:[[{},{},{}],[{},{},{}]],maskWidth:[{value:0},{value:0},{value:0},{value:0},{value:0},{value:0}],lineWidth:[{value:16},{value:16},{value:16},{value:16},{value:16},{value:16}],add:!0,end:!1}},mounted:function(){var t=this;this.task=setInterval((function(){t.$refs.mask.forEach((function(e,s){var i=t.$refs.mask[s],o=t.$refs.line[s],n=t.maskWidth[s],a=t.lineWidth[s];if(0===s)t.add&&n.value<16?(n.value++,a.value--):!t.add&&a.value<16&&(n.value--,a.value++);else if(t.add&&n.value<16){var r=t.maskWidth[s-1];r.value>=8&&(n.value++,a.value--)}else if(!t.add&&a.value<16){var c=t.lineWidth[s-1];c.value>=8&&(n.value--,a.value++)}i.style.width="".concat(Object(K["a"])(n.value),"rem"),i.style.flex="0 0 ".concat(Object(K["a"])(n.value),"rem"),o.style.width="".concat(Object(K["a"])(a.value),"rem"),o.style.flex="0 0 ".concat(Object(K["a"])(a.value),"rem"),s===t.maskWidth.length-1&&(t.add?16===n.value&&(t.end=!0):0===n.value&&(t.end=!0)),t.end&&(t.add=!t.add,t.end=!1)}))}),20)},beforeDestroy:function(){clearInterval(this.task)}},J=Y,G=(s("b32d"),Object(u["a"])(J,R,H,!1,null,"41aa75fa",null)),U=G.exports,q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",[s("div",{staticClass:"ebook-slide-contents"},[s("div",{staticClass:"slide-contents-search-wrapper"},[s("div",{staticClass:"slide-contents-search-input-wrapper"},[s("div",{staticClass:"slide-contents-search-icon"},[s("span",{staticClass:"icon-search"})]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"slide-contents-search-input",attrs:{type:"text",placeholder:t.$t("book.searchHint")},domProps:{value:t.searchText},on:{click:t.showSearchPage,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.search(e)},input:function(e){e.target.composing||(t.searchText=e.target.value)}}})]),t.searchVisible?s("div",{staticClass:"slide-contents-search-cancel",on:{click:function(e){return t.hideSearchPage()}}},[t._v(" "+t._s(t.$t("book.cancel"))+" ")]):t._e()]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.searchVisible,expression:"!searchVisible"}],staticClass:"slide-contents-book-wrapper"},[s("div",{staticClass:"slide-contents-book-img-wrapper"},[s("img",{staticClass:"slide-contents-book-img",attrs:{src:t.cover}})]),s("div",{staticClass:"slide-contents-book-info-wrapper"},[s("div",{staticClass:"slide-contents-book-title"},[s("span",{staticClass:"slide-contents-book-title-text"},[t._v(t._s(t.metadata?t.metadata.title:""))])]),s("div",{staticClass:"slide-contents-book-author"},[s("span",{staticClass:"slide-contents-book-author-text"},[t._v(t._s(t.metadata?t.metadata.creator:""))])])]),s("div",{staticClass:"slide-contents-book-progress-wrapper"},[s("div",{staticClass:"slide-contents-book-progress"},[s("span",{staticClass:"progress"},[t._v(t._s(t.progress+"%"))]),s("span",{staticClass:"progress-text"},[t._v(t._s(t.$t("book.haveRead2")))])]),s("div",{staticClass:"slide-contents-book-time"},[t._v(t._s(t.getReadTimeText()))])])]),s("Scroll",{directives:[{name:"show",rawName:"v-show",value:!t.searchVisible,expression:"!searchVisible"}],staticClass:"slide-contents-list",attrs:{top:66,bottom:48}},t._l(t.navigation,(function(e,i){return s("div",{key:i,staticClass:"slide-contents-item"},[s("span",{staticClass:"slide-contents-item-label",class:{selected:t.section===i},style:t.contentItemStyle(e),on:{click:function(s){return t.displayContent(e.href)}}},[t._v(t._s(e.label))]),s("span",{staticClass:"slide-contents-item-page"},[t._v(t._s(e.page))])])})),0),s("Scroll",{directives:[{name:"show",rawName:"v-show",value:t.searchVisible,expression:"searchVisible"}],staticClass:"slide-search-list",attrs:{top:66,bottom:48}},t._l(t.searchList,(function(e,i){return s("div",{key:i,staticClass:"slide-search-item",domProps:{innerHTML:t._s(e.excerpt)},on:{click:function(s){return t.displayContent(e.cfi,!0)}}})})),0)],1)])},Q=[],X=(s("d81d"),s("ac1f"),s("5319"),s("d3b7"),s("3ca3"),s("ddb0"),s("7db0"),s("99af"),s("6701")),Z={mixins:[r["a"]],components:{Scroll:X["a"]},data:function(){return{searchVisible:!1,searchText:"",searchList:[]}},mounted:function(){},methods:{search:function(){var t=this;this.searchText&&this.searchText.length>0&&this.doSearch(this.searchText).then((function(e){t.searchList=e,t.searchList.map((function(e){e.excerpt=e.excerpt.replace(t.searchText,'<span class="content-search-text">'.concat(t.searchText,"</span>"))}))}))},hideSearchPage:function(){this.searchVisible=!1,this.searchText=""},doSearch:function(t){var e=this;return Promise.all(this.currentBook.spine.spineItems.map((function(s){return s.load(e.currentBook.load.bind(e.currentBook)).then(s.find.bind(s,t)).finally(s.unload.bind(s))}))).then((function(t){return Promise.resolve([].concat.apply([],t))}))},showSearchPage:function(){this.searchVisible=!0},contentItemStyle:function(t){return{marginLeft:"".concat(Object(K["a"])(15*t.level),"rem")}},displayContent:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.display(t,(function(){e.hideTitleAndMenu(),s&&e.currentBook.rendition.annotations.highlight(t)}))}}},tt=Z,et=(s("e42e"),Object(u["a"])(tt,q,Q,!1,null,"757eceff",null)),st=et.exports,it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-slide-bookmark"},[s("div",{staticClass:"slide-bookmark-title"},[t._v(" "+t._s(t.$t("book.bookmark"))+" Â· "+t._s(t.bookmark?t.bookmark.length:0)+" ")]),s("Scroll",{staticClass:"slide-bookmark-list",attrs:{top:48,bottom:48}},t._l(t.bookmark,(function(e,i){return s("div",{key:i,staticClass:"slide-bookmark-item",on:{click:function(s){return t.displayBookmark(e.cfi)}}},[s("div",{staticClass:"slide-bookmark-item-icon"},[s("div",{staticClass:"icon-bookmark"})]),s("div",{staticClass:"slide-bookmark-item-text"},[t._v(t._s(e.text))])])})),0)],1)},ot=[],nt={mixins:[r["a"]],components:{Scroll:X["a"]},data:function(){return{bookmark:[]}},methods:{displayBookmark:function(t){var e=this;this.display(t,(function(){e.hideTitleAndMenu()}))}},mounted:function(){this.bookmark=Object(v["b"])(this.fileName)}},at=nt,rt=(s("84d9"),Object(u["a"])(at,it,ot,!1,null,"daf0a0c6",null)),ct=rt.exports,lt={mixins:[r["a"]],data:function(){return{currentTab:1,content:st,bookmark:ct}},components:{EbookLoading:U,EbookSlideBookmark:ct},methods:{hideTitleAndMenu:function(){this.setSettingVisible(-1)},selectTab:function(t){this.currentTab=t}}},ut=lt,dt=(s("b1f3"),Object(u["a"])(ut,I,D,!1,null,"cb9c59c6",null)),ht=dt.exports,ft={mixins:[r["a"]],components:{EbookSettingFont:F,EbookSettingFontPopup:x,EbookSettingTheme:N,EbookSettingProgress:W,EbookSlide:ht},methods:{showSetting:function(t){this.setSettingVisible(t)}}},pt=ft,mt=(s("0b58"),Object(u["a"])(pt,f,p,!1,null,"57129cd8",null)),bt=mt.exports,kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"bookmark",staticClass:"ebook-bookmark"},[s("div",{staticClass:"ebook-bookmark-text-wrapper"},[s("div",{ref:"iconDown",staticClass:"ebook-bookmark-down-wrapper"},[s("span",{staticClass:"icon-down"})]),s("div",{staticClass:"ebook-bookmark-text"},[t._v(t._s(t.text))])]),s("div",{staticClass:"ebook-bookmark-icon-wrapper",style:t.isFixed?t.fixedStyle:{}},[s("Bookmark",{attrs:{color:t.color,height:35,width:15}})],1)])},vt=[],gt=(s("25f0"),s("4de4"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"bookmark",staticClass:"bookmark",style:t.style})}),Ct=[],wt=(s("a9e3"),{props:{color:String,width:Number,height:Number},computed:{style:function(){return this.color?{borderColor:"".concat(this.color," ").concat(this.color," transparent ").concat(this.color)}:{}}},methods:{refresh:function(){this.width&&this.height&&(this.$refs.bookmark.style.borderWidth="".concat(Object(K["a"])(this.height-5),"rem ").concat(Object(K["a"])(this.width/2),"rem ").concat(Object(K["a"])(10),"rem ").concat(Object(K["a"])(this.width/2),"rem"))}},data:function(){return{}},mounted:function(){this.refresh()}}),xt=wt,yt=(s("2836"),Object(u["a"])(xt,gt,Ct,!1,null,"3d394a9e",null)),_t=yt.exports,St="#346cbc",$t="#777",Tt={mixins:[r["a"]],components:{Bookmark:_t},computed:{height:function(){return Object(K["b"])(35)},threshold:function(){return Object(K["b"])(55)},fixedStyle:function(){return{position:"fixed",top:0,right:"".concat((window.innerWidth-this.$refs.bookmark.clientWidth)/2,"px")}}},watch:{offsetY:function(t){!this.bookAvailable||this.menuVisible||this.settingVisible>0||(t>=this.height&&t<this.threshold?this.beforeThreshold(t):t>=this.threshold?this.afterThreshold(t):t>0&&t<this.height?this.beforeHeight():0===t&&this.restore())},isBookmark:function(t){this.isFixed=t,this.color=t?St:$t}},data:function(){return{color:$t,text:"",isFixed:!1}},methods:{addBookMark:function(){var t=this;this.bookmark=Object(v["b"])(this.fileName),this.bookmark||(this.bookmark=[]);var e=this.currentBook.rendition.currentLocation(),s=e.start.cfi.replace(/!.*/,""),i=e.start.cfi.replace(/.*!/,"").replace(/\)$/,""),o=e.end.cfi.replace(/.*!/,"").replace(/\)$/,""),n="".concat(s,"!,").concat(i,",").concat(o,")");this.currentBook.getRange(n).then((function(s){var i=s.toString().replace(/\s\s/g,"");t.bookmark.push({cfi:e.start.cfi,text:i}),Object(v["m"])(t.fileName,t.bookmark)}))},removeBookMark:function(){var t=this.currentBook.rendition.currentLocation(),e=t.start.cfi;if(this.bookmark=Object(v["b"])(this.fileName),this.bookmark){var s=this.bookmark.filter((function(t){return t.cfi!==e}));Object(v["m"])(this.fileName,s),this.setIsBookmark(!1)}},restore:function(){var t=this;setTimeout((function(){t.$refs.bookmark.style.top="".concat(-t.height,"px"),t.$refs.iconDown.style.transform="rotate(0deg)"}),200),this.isFixed?(this.setIsBookmark(!0),this.addBookMark()):(this.setIsBookmark(!1),this.removeBookMark())},beforeHeight:function(){this.isBookmark?(this.text=this.$t("book.pulldownDeleteMark"),this.color=St,this.isFixed=!0):(this.text=this.$t("book.pulldownAddMark"),this.color=$t,this.isFixed=!1)},beforeThreshold:function(t){this.$refs.bookmark.style.top="".concat(-t,"px"),this.isBookmark?(this.text=this.$t("book.pulldownDeleteMark"),this.color=St):(this.text=this.$t("book.pulldownAddMark"),this.color=$t);var e=this.$refs.iconDown;"rotate(180deg)"===e.style.transform&&(e.style.transform="rotate(0deg)")},afterThreshold:function(t){this.$refs.bookmark.style.top="".concat(-t,"px"),this.isBookmark?(this.text=this.$t("book.releaseDeleteMark"),this.color=$t,this.isFixed=!1):(this.text=this.$t("book.releaseAddMark"),this.color=St,this.isFixed=!0);var e=this.$refs.iconDown;"rotate(0deg)"!==e.style.transform&&""!==e.style.transform||(e.style.transform="rotate(180deg)")}}},Ft=Tt,Et=(s("482f"),Object(u["a"])(Ft,kt,vt,!1,null,"a4059c60",null)),Ot=Et.exports,Vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-header"},[s("span",{staticClass:"ebook-header-text"},[t._v(t._s(t.getSectionName))])])},jt=[],Bt={mixins:[r["a"]],data:function(){return{}}},Nt=Bt,Pt=(s("65be"),Object(u["a"])(Nt,Vt,jt,!1,null,"404de2f8",null)),Lt=Pt.exports,zt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-footer"},[s("span",{staticClass:"ebook-footer-text"},[t._v(t._s(this.paginate))])])},At=[],Mt={mixins:[r["a"]],data:function(){return{}}},Wt=Mt,It=(s("c56c"),Object(u["a"])(Wt,zt,At,!1,null,"45c09bcd",null)),Dt=It.exports,Rt={mixins:[r["a"]],name:"Ebook",components:{EbookTitle:h,EbookMenu:bt,EbookBookmark:Ot,EbookHeader:Lt,EbookFooter:Dt},watch:{offsetY:function(t){var e=this;!this.menuVisible&&this.bookAvailable&&(t>0?this.$refs.ebook.style.top=t+"px":0==t&&(this.$refs.ebook.style.top=0,this.$refs.ebook.style.transform="all .2s linear",setTimeout((function(){e.$refs.ebook.style.transform=""}),200)))}},methods:{startLoopReadTime:function(){var t=this,e=Object(v["i"])(this.fileName);e||(e=0),this.task=setInterval((function(){e++,e%30===0&&Object(v["s"])(t.fileName,e)}),1e3)}},mounted:function(){this.startLoopReadTime()},beforeDestroy:function(){this.task&&clearInterval(this.task)}},Ht=Rt,Kt=(s("31be"),Object(u["a"])(Ht,i,o,!1,null,"6a3b328f",null));e["default"]=Kt.exports},"5cd5":function(t,e,s){},"61b4":function(t,e,s){},"65be":function(t,e,s){"use strict";s("3892")},6701:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper",class:{"no-scroll":t.ifNoScroll},on:{"&scroll":function(e){return t.handleScroll(e)}}},[t._t("default")],2)},o=[],n=(s("a9e3"),s("fa7d")),a={props:{top:{type:Number,default:0},bottom:{type:Number,default:0},ifNoScroll:{type:Boolean,default:!1}},methods:{handleScroll:function(t){var e=t.target.scrollTop||window.pageYOffset||document.body.scrollTop;this.$emit("onScroll",e)},scrollTo:function(t,e){this.$refs.scrollWrapper.scrollTo(t,e)},refresh:function(){this.$refs.scrollWrapper&&(this.$refs.scrollWrapper.style.height=window.innerHeight-Object(n["b"])(this.top)-Object(n["b"])(this.bottom)+"px",this.$refs.scrollWrapper.addEventListener("scroll",this.handleScroll))}},data:function(){return{}},mounted:function(){this.refresh()}},r=a,c=(s("7d60"),s("2877")),l=Object(c["a"])(r,i,o,!1,null,"709ce4b1",null);e["a"]=l.exports},"69e5":function(t,e,s){},"7d60":function(t,e,s){"use strict";s("047b")},"84d9":function(t,e,s){"use strict";s("fdcd")},"8d62":function(t,e,s){"use strict";s("0cae")},"91dc":function(t,e,s){},"93a2":function(t,e,s){"use strict";s("faca")},a7cd:function(t,e,s){},b1f3:function(t,e,s){"use strict";s("91dc")},b32d:function(t,e,s){"use strict";s("69e5")},b75d:function(t,e,s){"use strict";s("1217")},c21d:function(t,e,s){"use strict";s("61b4")},c56c:function(t,e,s){"use strict";s("a7cd")},c9f7:function(t,e,s){},e42e:function(t,e,s){"use strict";s("5cd5")},faca:function(t,e,s){},fdcd:function(t,e,s){}}]);
//# sourceMappingURL=chunk-4ac690a3.4aacc456.js.map