{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.string.split.js","webpack:///src/components/ebook/EbookReader.vue","webpack:///./node_modules/core-js/modules/es.string.match.js","webpack:///./src/components/ebook/EbookReader.vue?d712","webpack:///./src/components/ebook/EbookReader.vue?c4c8","webpack:///./src/components/ebook/EbookReader.vue","webpack:///./src/components/ebook/EbookReader.vue?4a39","webpack:///./node_modules/core-js/modules/es.array.join.js"],"names":["fixRegExpWellKnownSymbolLogic","isRegExp","anObject","requireObjectCoercible","speciesConstructor","advanceStringIndex","toLength","callRegExpExec","regexpExec","stickyHelpers","UNSUPPORTED_Y","arrayPush","push","min","Math","MAX_UINT32","SPLIT","nativeSplit","maybeCallNative","internalSplit","split","length","separator","limit","string","String","this","lim","undefined","call","match","lastIndex","lastLength","output","flags","ignoreCase","multiline","unicode","sticky","lastLastIndex","separatorCopy","RegExp","source","slice","index","apply","test","O","splitter","regexp","res","done","value","rx","S","C","unicodeMatching","p","q","A","e","z","i","global","ePub","name","mixins","computed","methods","onMouseEnter","mouseState","mouseStateTime","timeStamp","preventDefault","stopPropagation","onMouseMove","firstOffsetY","offsetY","clientY","setOffsetY","onMouseEnd","time","move","changedTouches","moveEnd","onMaskClick","clientX","innerWidth","prevPage","nextPage","showTitleAndMenu","rendition","prev","then","hideTitleAndMenu","next","menuVisible","setSettingVisible","setFontFamilyVisible","setMenuVisible","intiFontSize","fontSize","setDefaultFontSize","currentBook","themes","initFontFamily","font","setDefaultFontFamily","initTheme","localTheme","themeList","setDefaultTheme","forEach","select","defaultTheme","initRendition","book","renderTo","width","height","innerHeight","method","display","startCfi","hooks","content","register","Promise","all","initGesture","on","initParseBook","loaded","cover","metadata","navigation","find","item","parent","navList","level","initEpub","setCurrentBook","ready","mounted","err","blob","regExpExec","MATCH","nativeMatch","matcher","fullUnicode","result","n","matchStr","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","$event","type","indexOf","_k","keyCode","key","button","staticRenderFns","component","$","IndexedObject","toIndexedObject","arrayMethodIsStrict","nativeJoin","join","ES3_STRINGS","Object","STRICT_METHOD","target","proto","forced"],"mappings":"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","file":"js/chunk-26ed412a.d6399d3d.js","sourcesContent":["'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar isRegExp = require('../internals/is-regexp');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar speciesConstructor = require('../internals/species-constructor');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar toLength = require('../internals/to-length');\nvar callRegExpExec = require('../internals/regexp-exec-abstract');\nvar regexpExec = require('../internals/regexp-exec');\nvar stickyHelpers = require('../internals/regexp-sticky-helpers');\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;\nvar arrayPush = [].push;\nvar min = Math.min;\nvar MAX_UINT32 = 0xFFFFFFFF;\n\n// @@split logic\nfixRegExpWellKnownSymbolLogic('split', 2, function (SPLIT, nativeSplit, maybeCallNative) {\n  var internalSplit;\n  if (\n    'abbc'.split(/(b)*/)[1] == 'c' ||\n    // eslint-disable-next-line regexp/no-empty-group -- required for testing\n    'test'.split(/(?:)/, -1).length != 4 ||\n    'ab'.split(/(?:ab)*/).length != 2 ||\n    '.'.split(/(.?)(.?)/).length != 4 ||\n    // eslint-disable-next-line regexp/no-assertion-capturing-group, regexp/no-empty-group -- required for testing\n    '.'.split(/()()/).length > 1 ||\n    ''.split(/.?/).length\n  ) {\n    // based on es5-shim implementation, need to rework it\n    internalSplit = function (separator, limit) {\n      var string = String(requireObjectCoercible(this));\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (separator === undefined) return [string];\n      // If `separator` is not a regex, use native split\n      if (!isRegExp(separator)) {\n        return nativeSplit.call(string, separator, lim);\n      }\n      var output = [];\n      var flags = (separator.ignoreCase ? 'i' : '') +\n                  (separator.multiline ? 'm' : '') +\n                  (separator.unicode ? 'u' : '') +\n                  (separator.sticky ? 'y' : '');\n      var lastLastIndex = 0;\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      var separatorCopy = new RegExp(separator.source, flags + 'g');\n      var match, lastIndex, lastLength;\n      while (match = regexpExec.call(separatorCopy, string)) {\n        lastIndex = separatorCopy.lastIndex;\n        if (lastIndex > lastLastIndex) {\n          output.push(string.slice(lastLastIndex, match.index));\n          if (match.length > 1 && match.index < string.length) arrayPush.apply(output, match.slice(1));\n          lastLength = match[0].length;\n          lastLastIndex = lastIndex;\n          if (output.length >= lim) break;\n        }\n        if (separatorCopy.lastIndex === match.index) separatorCopy.lastIndex++; // Avoid an infinite loop\n      }\n      if (lastLastIndex === string.length) {\n        if (lastLength || !separatorCopy.test('')) output.push('');\n      } else output.push(string.slice(lastLastIndex));\n      return output.length > lim ? output.slice(0, lim) : output;\n    };\n  // Chakra, V8\n  } else if ('0'.split(undefined, 0).length) {\n    internalSplit = function (separator, limit) {\n      return separator === undefined && limit === 0 ? [] : nativeSplit.call(this, separator, limit);\n    };\n  } else internalSplit = nativeSplit;\n\n  return [\n    // `String.prototype.split` method\n    // https://tc39.es/ecma262/#sec-string.prototype.split\n    function split(separator, limit) {\n      var O = requireObjectCoercible(this);\n      var splitter = separator == undefined ? undefined : separator[SPLIT];\n      return splitter !== undefined\n        ? splitter.call(separator, O, limit)\n        : internalSplit.call(String(O), separator, limit);\n    },\n    // `RegExp.prototype[@@split]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@split\n    //\n    // NOTE: This cannot be properly polyfilled in engines that don't support\n    // the 'y' flag.\n    function (regexp, limit) {\n      var res = maybeCallNative(internalSplit, regexp, this, limit, internalSplit !== nativeSplit);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n      var C = speciesConstructor(rx, RegExp);\n\n      var unicodeMatching = rx.unicode;\n      var flags = (rx.ignoreCase ? 'i' : '') +\n                  (rx.multiline ? 'm' : '') +\n                  (rx.unicode ? 'u' : '') +\n                  (UNSUPPORTED_Y ? 'g' : 'y');\n\n      // ^(? + rx + ) is needed, in combination with some S slicing, to\n      // simulate the 'y' flag.\n      var splitter = new C(UNSUPPORTED_Y ? '^(?:' + rx.source + ')' : rx, flags);\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (S.length === 0) return callRegExpExec(splitter, S) === null ? [S] : [];\n      var p = 0;\n      var q = 0;\n      var A = [];\n      while (q < S.length) {\n        splitter.lastIndex = UNSUPPORTED_Y ? 0 : q;\n        var z = callRegExpExec(splitter, UNSUPPORTED_Y ? S.slice(q) : S);\n        var e;\n        if (\n          z === null ||\n          (e = min(toLength(splitter.lastIndex + (UNSUPPORTED_Y ? q : 0)), S.length)) === p\n        ) {\n          q = advanceStringIndex(S, q, unicodeMatching);\n        } else {\n          A.push(S.slice(p, q));\n          if (A.length === lim) return A;\n          for (var i = 1; i <= z.length - 1; i++) {\n            A.push(z[i]);\n            if (A.length === lim) return A;\n          }\n          q = p = e;\n        }\n      }\n      A.push(S.slice(p));\n      return A;\n    }\n  ];\n}, UNSUPPORTED_Y);\n","<template>\n  <div class=\"ebook-reader\">\n    <div id=\"read\">\n      <!-- {{this.$route.params.fileName}} -->\n    </div>\n    <div\n      class=\"ebook-reader-mask\"\n      @click=\"onMaskClick\"\n      @touchmove=\"move\"\n      @touchend=\"moveEnd\"\n      @mousedown.left=\"onMouseEnter\"\n      @mousemove.left=\"onMouseMove\"\n      @mouseup.left=\"onMouseEnd\"\n    ></div>\n  </div>\n</template>\n\n<script>\nimport Epub from 'epubjs'\nimport { ebookMixin } from '../../utils/mixin'\nimport {\n  getFontFamily,\n  getFontSize,\n  getLocation,\n  getTheme,\n  setFontFamily,\n  setFontSize,\n  setTheme,\n} from '../../utils/localStorage'\nimport { flatten } from '../../utils/book'\nimport { getLocalForage } from '../../utils/localForage'\nglobal.ePub = Epub\nexport default {\n  name: 'EbookReader',\n  mixins: [ebookMixin],\n  computed: {},\n  methods: {\n    //1 鼠标进入\n    //2 鼠标进入后移动\n    // 3鼠标从移动状态松手\n    //4鼠标还原\n    onMouseEnter(e) {\n      this.mouseState = 1\n      // console.log(e)\n      this.mouseStateTime = e.timeStamp\n      e.preventDefault()\n      e.stopPropagation()\n    },\n    onMouseMove(e) {\n      if (this.mouseState === 1) {\n        this.mouseState = 2\n      } else if (this.mouseState === 2) {\n        let offsetY = 0\n        if (this.firstOffsetY) {\n          offsetY = e.clientY - this.firstOffsetY\n          this.setOffsetY(offsetY)\n        } else {\n          this.firstOffsetY = e.clientY\n        }\n      }\n      // console.log(e)\n      e.preventDefault()\n      e.stopPropagation()\n    },\n    onMouseEnd(e) {\n      if (this.mouseState === 2) {\n        this.setOffsetY(0)\n        this.firstOffsetY = null\n        this.mouseState = 3\n      } else {\n        this.mouseState = 4\n      }\n      const time = e.timeStamp - this.mouseStateTime\n      if (time < 200) {\n        this.mouseState = 4\n      }\n      e.preventDefault()\n      e.stopPropagation()\n    },\n    move(e) {\n      let offsetY = 0\n      if (this.firstOffsetY) {\n        offsetY = e.changedTouches[0].clientY - this.firstOffsetY\n        this.setOffsetY(offsetY)\n      } else {\n        this.firstOffsetY = e.changedTouches[0].clientY\n      }\n      e.preventDefault()\n      e.stopPropagation()\n      // console.log(offsetY)\n    },\n    moveEnd() {\n      this.setOffsetY(0)\n      this.firstOffsetY = 0\n    },\n    onMaskClick(e) {\n      if (this.mouseState && (this.mouseState === 2 || this.mouseState === 3)) {\n        return\n      }\n      const clientX = e.clientX\n      const innerWidth = window.innerWidth\n      if (clientX > 0 && clientX < innerWidth * 0.3) {\n        this.prevPage()\n      } else if (clientX > innerWidth * 0.7 && clientX < innerWidth) {\n        this.nextPage()\n      } else {\n        this.showTitleAndMenu()\n      }\n    },\n    prevPage() {\n      if (this.rendition) {\n        this.rendition.prev().then(() => {\n          this.refreshLocation()\n        })\n        this.hideTitleAndMenu()\n      }\n    },\n    nextPage() {\n      if (this.rendition) {\n        this.rendition.next().then(() => {\n          this.refreshLocation()\n        })\n        this.hideTitleAndMenu()\n      }\n    },\n    showTitleAndMenu() {\n      // this.$store.dispatch('setMenuVisible',!this.menuVisible)\n      if (this.menuVisible) {\n        this.setSettingVisible(-1)\n        this.setFontFamilyVisible(false)\n      }\n      this.setMenuVisible(!this.menuVisible)\n\n      // console.log(this.menuVisible)\n    },\n\n    intiFontSize() {\n      const fontSize = getFontSize(this.fileName)\n      if (fontSize) {\n        this.setDefaultFontSize(fontSize)\n        this.currentBook.rendition.themes.fontSize(fontSize + 'px')\n      } else {\n        setFontSize(this.fileName, this.defaultFontSize)\n      }\n    },\n    initFontFamily() {\n      const font = getFontFamily(this.fileName)\n      if (font) {\n        this.setDefaultFontFamily(font)\n        this.currentBook.rendition.themes.font(font)\n      } else {\n        setFontFamily(this.fileName, this.defaultFontFamily)\n      }\n    },\n    initTheme() {\n      let localTheme = getTheme(this.fileName)\n      if (!localTheme) {\n        localTheme = this.themeList[0].name\n        setTheme(this.fileName, localTheme)\n      }\n      this.setDefaultTheme(localTheme)\n      this.themeList.forEach((theme) => {\n        // console.log(item.name, item.style)\n        this.rendition.themes.register(theme.name, theme.style)\n      })\n      // console.log(localTheme)\n      this.rendition.themes.select(this.defaultTheme)\n    },\n    initRendition() {\n      this.rendition = this.book.renderTo('read', {\n        width: innerWidth,\n        height: innerHeight,\n        method: 'default',\n      })\n      // console.log(this.$store.state.book.fileName)\n      const startCfi = getLocation(this.fileName)\n      // console.log(startCfi)\n      this.display(startCfi, () => {\n        this.initTheme()\n        this.initFontFamily()\n        this.intiFontSize()\n        this.initGlobalCss()\n      })\n      this.rendition.hooks.content.register((contents) => {\n        Promise.all([\n          contents.addStylesheet(\n            `${process.env.VUE_APP_RES_URL}/fonts/cabin.css`\n          ),\n          contents.addStylesheet(\n            `${process.env.VUE_APP_RES_URL}/fonts/tangerine.css`\n          ),\n          contents.addStylesheet(\n            `${process.env.VUE_APP_RES_URL}/fonts/montserrat.css`\n          ),\n          contents.addStylesheet(\n            `${process.env.VUE_APP_RES_URL}/fonts/daysOne.css`\n          ),\n        ]).then(() => {})\n      })\n    },\n    initGesture() {\n      this.rendition.on('touchstart', (event) => {\n        // console.log(event)\n        this.clientX = event.changedTouches[0].clientX\n        this.timeStamp = event.timeStamp\n      })\n      this.rendition.on('touchend', (event) => {\n        this.move = event.changedTouches[0].clientX - this.clientX\n        this.timeStampMove = event.timeStamp - this.timeStamp\n        // console.log(this.move,this.timeStampMove)\n        if (this.move > 40 && this.timeStampMove > 400) {\n          this.prevPage()\n        } else if (this.move < -40 && this.timeStampMove > 400) {\n          this.nextPage()\n        } else {\n          this.showTitleAndMenu()\n        }\n      })\n    },\n    initParseBook() {\n      this.book.loaded.cover.then((cover) => {\n        this.book.archive.createUrl(cover).then((url) => {\n          this.setCover(url)\n        })\n      })\n      this.book.loaded.metadata.then((metadata) => {\n        this.setMetadata(metadata)\n      })\n      this.book.loaded.navigation.then((nav) => {\n        const navList = flatten(nav.toc)\n        // console.log(navList)\n        function find(item, level = 0) {\n          return !item.parent\n            ? level\n            : find(\n                navList.filter(\n                  (parentItem) => parentItem.id === item.parent\n                )[0],\n                ++level\n              )\n        }\n        // function find(parentItem, level = 0) {\n        //   if (!parentItem) {\n        //     return level\n        //   } else {\n        //     return find(\n        //       navList.filter((item) => {\n        //         if (item.id === parentItem.parent) {\n        //           return item\n        //         }\n        //       })[0],\n        //       ++level\n        //     )\n        //   }\n        // }\n        // console.log(navList)\n        navList.forEach((item) => {\n          item.level = find(item)\n        })\n        this.setNavigation(navList)\n        // console.log(navList)\n      })\n    },\n    initEpub(url) {\n      // console.log(process.env.VUE_APP_RES_URL)\n      this.book = new Epub(url)\n      this.setCurrentBook(this.book)\n      this.initRendition()\n      // this.initGesture()\n      this.initParseBook()\n      this.book.ready\n        .then(() => {\n          return this.book.locations.generate(\n            //参数为每页的字数\n            750 * (window.innerHeight / 375) * (getFontSize(this.fileName) / 16)\n          )\n        })\n        .then((locations) => {\n          // console.log()\n          this.navigation.forEach((nav) => {\n            nav.pagelist = []\n          })\n          // console.log(locations)\n          locations.forEach((item) => {\n            const loc = item.match(/\\[(.*)\\]!/)[1]\n            this.navigation.forEach((nav) => {\n              if (nav.href) {\n                const href = nav.href.match(/^(.*)\\.html$/)\n                if (href) {\n                  if (href[1] === loc) {\n                    nav.pagelist.push(item)\n                  }\n                }\n              }\n            })\n            let currentPage = 1\n            this.navigation.forEach((nav, index) => {\n              if (index === 0) {\n                nav.page = 1\n              } else {\n                nav.page = currentPage\n              }\n              currentPage += nav.pagelist.length + 1\n            })\n            // console.log(item)\n          })\n          this.setPagelist(locations)\n          this.setBookAvailable(true)\n          this.refreshLocation()\n        })\n    },\n  },\n  mounted() {\n    // console.log(this.$route.params)\n    // this.$store.dispatch('setFileName', this.$route.params.fileName.split('|').join('/')).then(()=>{\n    //   this.initEpub()\n    // })\n    const books = this.$route.params.fileName.split('|')\n    const fileName = books[1]\n    getLocalForage(fileName, (err, blob) => {\n      if (!err && blob) {\n        // console.log('找到离线缓存电子书')\n        this.setFileName(books.join('/')).then(() => {\n          this.initEpub(blob)\n        })\n      } else {\n        // console.log('在线获取电子书')\n        this.setFileName(books.join('/')).then(() => {\n          const url =\n            process.env.VUE_APP_EPUB_URL + '/' + this.fileName + '.epub'\n          this.initEpub(url)\n          // console.log(this.currentBook)\n        })\n      }\n    })\n\n    // console.log(this.currentBook)\n    // console.log(this.fileName)\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../assets/styles/global';\n.ebook-reader {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  .ebook-reader-mask {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 160;\n    // background: yellow;\n    background: transparent;\n  }\n}\n</style>\n","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar toLength = require('../internals/to-length');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@match logic\nfixRegExpWellKnownSymbolLogic('match', 1, function (MATCH, nativeMatch, maybeCallNative) {\n  return [\n    // `String.prototype.match` method\n    // https://tc39.es/ecma262/#sec-string.prototype.match\n    function match(regexp) {\n      var O = requireObjectCoercible(this);\n      var matcher = regexp == undefined ? undefined : regexp[MATCH];\n      return matcher !== undefined ? matcher.call(regexp, O) : new RegExp(regexp)[MATCH](String(O));\n    },\n    // `RegExp.prototype[@@match]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@match\n    function (regexp) {\n      var res = maybeCallNative(nativeMatch, regexp, this);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n\n      if (!rx.global) return regExpExec(rx, S);\n\n      var fullUnicode = rx.unicode;\n      rx.lastIndex = 0;\n      var A = [];\n      var n = 0;\n      var result;\n      while ((result = regExpExec(rx, S)) !== null) {\n        var matchStr = String(result[0]);\n        A[n] = matchStr;\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n        n++;\n      }\n      return n === 0 ? null : A;\n    }\n  ];\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ebook-reader\"},[_c('div',{attrs:{\"id\":\"read\"}}),_c('div',{staticClass:\"ebook-reader-mask\",on:{\"click\":_vm.onMaskClick,\"touchmove\":_vm.move,\"touchend\":_vm.moveEnd,\"mousedown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }return _vm.onMouseEnter($event)},\"mousemove\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }return _vm.onMouseMove($event)},\"mouseup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }return _vm.onMouseEnd($event)}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EbookReader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EbookReader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EbookReader.vue?vue&type=template&id=271680dc&scoped=true&\"\nimport script from \"./EbookReader.vue?vue&type=script&lang=js&\"\nexport * from \"./EbookReader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EbookReader.vue?vue&type=style&index=0&id=271680dc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"271680dc\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EbookReader.vue?vue&type=style&index=0&id=271680dc&lang=scss&scoped=true&\"","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.es/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n"],"sourceRoot":""}